# PDF Converter Pipeline - ะะพะดัะปัะฝะฐั ะััะธัะตะบัััะฐ

> ะะพัะพะฒะพะต ัะตัะตะฝะธะต ะดะปั ะฒััะพะบะพะบะฐัะตััะฒะตะฝะฝะพะน ะบะพะฝะฒะตััะฐัะธะธ **ัะธััะพะฒัั PDF** ะฒ Markdown ั ะผะพะดัะปัะฝะพะน ะพัะบะตัััะฐัะธะตะน, 5-ััะพะฒะฝะตะฒัะผ ะบะพะฝััะพะปะตะผ ะบะฐัะตััะฒะฐ, ะณะปัะฑะพะบะพะน ะฒะฐะปะธะดะฐัะธะตะน ะธ ะพะฟัะธะพะฝะฐะปัะฝัะผ ะฟะตัะตะฒะพะดะพะผ ั ะฟัะธะผะตะฝะตะฝะธะตะผ ัะพะฒัะตะผะตะฝะฝัั ัะตัะฝะพะปะพะณะธะน ะะ ั ะบะธัะฐะนัะบะพะณะพ ะฝะฐ ะฐะฝะณะปะธะนัะบะธะน ะธะปะธ ััััะบะธะน ัะทัะบะธ.

## ๐ ะะฑะทะพั ัะธััะตะผั

**PDF Converter Pipeline** โ ะฒััะพะบะพะฟัะพะธะทะฒะพะดะธัะตะปัะฝะฐั ัะธััะตะผะฐ, ัะฐะทัะฐะฑะพัะฐะฝะฝะฐั ะดะปั ะบะพะฝะฒะตััะฐัะธะธ ะธ ะฟะตัะตะฒะพะดะฐ ัะธััะพะฒัั PDF-ะดะพะบัะผะตะฝัะพะฒ, ะฐะดะฐะฟัะธัะพะฒะฐะฝะฝะฐั ะฟะพะด ะผะฝะพะณะพัะทััะฝัั ะปะพะบะฐะปะธะทะฐัะธั. ะะฐะนะฟะปะฐะนะฝ ัะพัะตัะฐะตั ะณะธะฑะบัั ะผะพะดัะปัะฝัั ะฐััะธัะตะบัััั (4 DAG + Master Orchestrator), ะธะฝัะตะปะปะตะบััะฐะปัะฝะพะต ะธะทะฒะปะตัะตะฝะธะต ัะธััะพะฒะพะณะพ ัะปะพั PDF (Docling), ะบะพะผะฑะธะฝะธัะพะฒะฐะฝะฝัะน OCR (PaddleOCR + Tesseract) ะดะปั ะณะธะฑัะธะดะฝัั ััะตะฝะฐัะธะตะฒ ะธ 5-ััะพะฒะฝะตะฒัั ัะธััะตะผั QA ะดะปั ะดะพััะธะถะตะฝะธั ะบะฐัะตััะฒะฐ ะฒะฟะปะพัั ะดะพ 100โฏ%.

ะัะพะตะบั ะผะฐัััะฐะฑะธััะตััั ะพั ะปะพะบะฐะปัะฝะพะณะพ ะทะฐะฟััะบะฐ ัะตัะตะท ะตะดะธะฝัะน ััะตะฝะฐัะธะน `translate-documents.sh`, ะบะพัะพััะน ะฟะพะดะดะตัะถะธะฒะฐะตั ัะตะถะธะผั ยซัะพะปัะบะพ ะบะพะฝะฒะตััะฐัะธั PDFโMD ั 5-ััะพะฒะฝะตะฒะพะน ะฒะฐะปะธะดะฐัะธะตะนยป ะธ ยซะบะพะฝะฒะตััะฐัะธั + ะฟะตัะตะฒะพะดยป, ะดะพ ัะฐัะฟัะตะดะตะปัะฝะฝะพะณะพ ะธัะฟะพะปะฝะตะฝะธั ะฒ ะบะปะฐััะตัะต Airflow ั ะฟะพะดะบะปััะตะฝะธะตะผ vLLM ะดะปั ะฟะตัะตะฒะพะดะพะฒ ะฝะฐ ะฐะฝะณะปะธะนัะบะธะน ะธ ััััะบะธะน ัะทัะบะธ.

## โญ ะะปััะตะฒัะต ะพัะพะฑะตะฝะฝะพััะธ

- ๐ง **vLLM Integration** โ ะธัะฟะพะปัะทะพะฒะฐะฝะธะต ะฒััะพะบะพะฟัะพะธะทะฒะพะดะธัะตะปัะฝัั inference-ัะตัะฒะตัะพะฒ vLLM ะดะปั ะฟะตัะตะฒะพะดะพะฒ ะธ QA-ะฟัะพะผะฟัะพะฒ (ะธัะฟะพะปัะทัะตััั ะดะธะฝะฐะผะธัะตัะบะฐั ะทะฐะผะตะฝะฐ ะผะพะดะตะปะตะน ะดะปั ัะฐะทะฝัั ะทะฐะดะฐั).
- ๐๏ธ **ะะพะดัะปัะฝะฐั ะฐััะธัะตะบัััะฐ** โ Master Orchestrator ัะฟัะฐะฒะปัะตั ัะตััััะผั ัะฟะตัะธะฐะปะธะทะธัะพะฒะฐะฝะฝัะผะธ DAG: ะฟัะตะดะฒะฐัะธัะตะปัะฝะฐั ะพะฑัะฐะฑะพัะบะฐ, ะฟัะตะพะฑัะฐะทะพะฒะฐะฝะธะต, ะฟะตัะตะฒะพะด, ะบะพะฝััะพะปั ะบะฐัะตััะฒะฐ.
- ๐ **Docling + OCR** โ ะณะธะฑัะธะดะฝัะน ััะตะบ Docling + PaddleOCR + Tesseract + Tabula-Py ะพะฑะตัะฟะตัะธะฒะฐะตั ัะพัะฝะพะต ะธะทะฒะปะตัะตะฝะธะต ัะตะบััะฐ, ัะฐะฑะปะธั ะธ ะธะทะพะฑัะฐะถะตะฝะธะน.
- ๐ **5-ััะพะฒะฝะตะฒะฐั QA ัะธััะตะผะฐ** โ ะบะพะผะฑะธะฝะธัะพะฒะฐะฝะฝะฐั ะฟัะพะฒะตัะบะฐ (OCR cross-check, ะฒะธะทัะฐะปัะฝัะน diff, AST-ะฐะฝะฐะปะธะท, ัะพะดะตัะถะฐัะตะปัะฝะฐั ะฒะฐะปะธะดะฐัะธั, ะฐะฒัะพะบะพััะตะบัะธั).
- ๐ **ะะฝะพะณะพัะทััะฝะพััั** โ ะบะธัะฐะนัะบะธะน โ ะฐะฝะณะปะธะนัะบะธะน/ััััะบะธะน ั ัะพััะฐะฝะตะฝะธะตะผ ัะตัะฝะธัะตัะบะพะน ัะตัะผะธะฝะฐะปะพะณะธะธ ะดะปั ัะตัะฒะตัะฝะพะณะพ ะพะฑะพััะดะพะฒะฐะฝะธั.
- ๐ **ะะพะปะฝัะน ะผะพะฝะธัะพัะธะฝะณ** โ Prometheus + Grafana ั ะบะฐััะพะผะฝัะผะธ ะดะฐัะฑะพัะดะฐะผะธ ะธ alerting.
- โก **GPU ะพะฟัะธะผะธะทะฐัะธั** โ ะฝะฐัะธะฒะฝะฐั ะฟะพะดะดะตัะถะบะฐ 2ร NVIDIA A6000 ะฟะพะด CUDA 12.9.

## ๐๏ธ ะััะธัะตะบัััะฐ ัะธััะตะผั

```
โโโโโโโโโโโโโโโโโโโ   โโโโโโโโโโโโโโโโโโโ   โโโโโโโโโโโโโโโโโโโ
โ Flask API       โ   โ Master DAG      โ   โ Monitoring      โ
โ (Gateway)       โโโโบโ (Orchestrator)  โโโโบโ Prometheus+     โ
โโโโโโโโโโโโโโโโโโโ   โโโโโโโโโโโโโโโโโโโ   โ Grafana         โ
              โ                             โโโโโโโโโโโโโโโโโโโ
              โผ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ Modular DAG Pipeline                                        โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
                        โ
โโโโโโโโโโโโโโโโโโโโโโโโโผโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โผ                       โผ                               โผ
โโโโโโโโโโโโโโโโ  โโโโโโโโโโโโโโโโ  โโโโโโโโโโโโโโโโ  โโโโโโโโโโโโโโโโ
โ DAG 1        โ  โ DAG 2        โ  โ DAG 3        โ  โ DAG 4        โ
โ Document     โโโบโ Content      โโโบโ Translation  โโโบโ Quality      โ
โ Preprocessingโ  โTransformationโ  โ Pipeline     โ  โ Assurance    โ
โ              โ  โ              โ  โ              โ  โ (5 levels)   โ
โโโโโโโโโโโโโโโโ  โโโโโโโโโโโโโโโโ  โโโโโโโโโโโโโโโโ  โโโโโโโโโโโโโโโโ
       โ                โ                โ                โ
       โผ                โผ                โผ                โผ
โโโโโโโโโโโโโโโโ โโโโโโโโโโโโโโโโ โโโโโโโโโโโโโโโโ โโโโโโโโโโโโโโโโ
โ Docling +    โ โ vLLM         โ โ vLLM         โ โ OCR Cross-   โ
โ PaddleOCR +  โ โ Qwen/Qwen3-  โ โ Qwen/Qwen3-  โ โ Validation + โ
โ Tesseract +  โ โ 30B-A3B-     โ โ 30B-A3B-     โ โ Visual Diff +โ
โ Tabula-Py    โ โ Instruct-2507โ โ Instruct-2507โ โ AST Compare +โ
โ              โ โ Markdown     โ โ Translation  โ โ Auto-Correct โ
โโโโโโโโโโโโโโโโ โโโโโโโโโโโโโโโโ โโโโโโโโโโโโโโโโ โโโโโโโโโโโโโโโโ
```

Master Orchestrator ัะตัะตะท Airflow ะบะพะพัะดะธะฝะธััะตั ะฟัะพัะพะถะดะตะฝะธะต ะดะพะบัะผะตะฝัะพะฒ ะฟะพ ะฒัะตะผ ััะฐะฟะฐะผ, ัะพะฑะธัะฐะตั ัะตะปะตะผะตััะธั ะธ ะฟัะฑะปะธะบัะตั ัะพะฑััะธั ะฒ ัะธััะตะผั ะผะพะฝะธัะพัะธะฝะณะฐ. ะะปั ะปะพะบะฐะปัะฝะพะน ัะฐะทัะฐะฑะพัะบะธ ะบะฐะถะดัะน DAG ะผะพะถะตั ะฑััั ะฒัะทะฒะฐะฝ ะฝะฐะฟััะผัั ัะตัะตะท ัะพะพัะฒะตัััะฒัััะธะต ัะบัะธะฟัั ัะตะฟะพะทะธัะพัะธั.

## ๐ ะะพะดัะปัะฝัะต DAG

### DAG 1: Document Preprocessing
- **ะฆะตะปั**: ะงะธััะพะต ะธะทะฒะปะตัะตะฝะธะต ะบะพะฝัะตะฝัะฐ ะฑะตะท ะฟะพัะตัั ััััะบัััั.
- **ะะพะผะฟะพะฝะตะฝัั**: IBM Docling, PaddleOCR + Tesseract cross-validation, Tabula-Py ะดะปั ัะฐะฑะปะธั.
- **ะััะพะดั**: ะกัััะบัััะธัะพะฒะฐะฝะฝัะน ะบะพะฝัะตะฝั, ะผะตัะฐะดะฐะฝะฝัะต, ะฟัะพะผะตะถััะพัะฝัะต ะฐััะตัะฐะบัั (ะธะทะพะฑัะฐะถะตะฝะธั, ัะฐะฑะปะธัั, ััะฐัะธััะธะบะฐ).

### DAG 2: Content Transformation
- **ะฆะตะปั**: ะะตะฝะตัะฐัะธั ะฒััะพะบะพะบะฐัะตััะฒะตะฝะฝะพะณะพ Markdown.
- **ะะพะผะฟะพะฝะตะฝัั**: vLLM ั ะผะพะดะตะปัั `Qwen/Qwen3-30B-A3B-Instruct-2507` (ัะตะฝััะฐะปะธะทะพะฒะฐะฝะฝะพ ะทะฐะดะฐัััั ัะตัะตะท `VLLM_MODEL_NAME`), ะฝะพัะผะฐะปะธะทะฐัะธั Markdown, ะฟะพััะพะฑัะฐะฑะพัะบะฐ.
- **ะััะพะดั**: Markdown ั ัะพััะฐะฝะตะฝะธะตะผ ัะตะผะฐะฝัะธะบะธ ะธ ัะตัะฝะธัะตัะบะธั ัะตัะผะธะฝะพะฒ.

### DAG 3: Translation Pipeline
- **ะฆะตะปั**: ะะตัะตะฒะพะด ั ัะพััะฐะฝะตะฝะธะตะผ ััััะบัััั ะธ ะบะพะผะฐะฝะด.
- **ะะพะผะฟะพะฝะตะฝัั**: vLLM ั ะผะพะดะตะปัั `Qwen/Qwen3-30B-A3B-Instruct-2507` (ัะตัะตะท ัั ะถะต ะฟะตัะตะผะตะฝะฝัั `VLLM_MODEL_NAME`), ะฟัะพะผะฟัั ะดะปั ัะตัะฝะธัะตัะบะพะน ะดะพะบัะผะตะฝัะฐัะธะธ.
- **ะััะพะดั**: ะะตัะตะฒะตะดัะฝะฝัะต Markdown-ัะฐะนะปั (EN/RU) + ัะพะฟััััะฒัััะธะต ะผะตัะฐะดะฐะฝะฝัะต.

### DAG 4: Quality Assurance (5 ััะพะฒะฝะตะน)
- **ะฃัะพะฒะตะฝั 1**: OCR cross-validation (PaddleOCR + Tesseract).
- **ะฃัะพะฒะตะฝั 2**: ะะธะทัะฐะปัะฝะพะต ััะฐะฒะฝะตะฝะธะต + SSIM-ะฐะฝะฐะปะธะท.
- **ะฃัะพะฒะตะฝั 3**: AST ััะฐะฒะฝะตะฝะธะต ััััะบัััั ะดะพะบัะผะตะฝัะพะฒ.
- **ะฃัะพะฒะตะฝั 4**: ะะฐะปะธะดะฐัะธั ัะพะดะตัะถะธะผะพะณะพ (ัะฐะฑะปะธัั, ะบะพะด, ะธะทะพะฑัะฐะถะตะฝะธั, ัะตัะผะธะฝั).
- **ะฃัะพะฒะตะฝั 5**: ะะฒัะพะบะพััะตะบัะธั, ะธัะพะณะพะฒะฐั ะพัะตะฝะบะฐ (ะดะพ 100โฏ%).

### ะะฝััะฐััััะบัััะฐ ะธ ัะตัะฒะธัั

- **`airflow/`** โ DAG Master Orchestrator ะธ ัะฟะตัะธะฐะปะธะทะธัะพะฒะฐะฝะฝัะต DAG 1โ4.
- **`flask/`** โ REST API (gateway) ะดะปั ะทะฐะณััะทะบะธ PDF ะธ ัะฟัะฐะฒะปะตะฝะธั ะทะฐะดะฐะฝะธัะผะธ.
- **`grafana/`, `prometheus/`** โ ะผะพะฝะธัะพัะธะฝะณ (ะดะฐัะฑะพัะดั, ะฐะปะตััั).
- **`vllm/`** โ ะบะพะฝัะธะณััะฐัะธั inference-ัะตัะฒะตัะพะฒ ะธ ะทะฐะณััะทะบะฐ ะผะพะดะตะปะตะน Qwen.
- **`docs/`** โ ะฐััะธัะตะบัััะฝัะต ะดะธะฐะณัะฐะผะผั, deployment-guide ะธ ะดะพะฟะพะปะฝะธัะตะปัะฝัะต ััะตะผั.

## โ๏ธ ะญัะฐะฟั ะพะฑัะฐะฑะพัะบะธ ะดะพะบัะผะตะฝัะฐ

1. **ะะพะดะณะพัะพะฒะบะฐ** โ PDF ะฟะพะผะตัะฐัััั ะฒ ะบะฐัะฐะปะพะณ `input/` (ะธัะฟะพะปัะทัะตััั ะปะพะบะฐะปัะฝัะผ ัะบัะธะฟัะพะผ) ะธะปะธ ะทะฐะณััะถะฐัััั ัะตัะตะท Flask API.
2. **ะะฐะฟััะบ ะบะพะฝะฒะตััะฐัะธะธ** โ ะปะพะบะฐะปัะฝะพ ัะตัะตะท ัะตะถะธะผ ยซ5. ะขะพะปัะบะพ ะบะพะฝะฒะตััะฐัะธั PDF โ MDยป ัะบัะธะฟัะฐ `translate-documents.sh` ะปะธะฑะพ Master DAG ะฒ Airflow ะธะฝะธัะธะธัััั ะฒัะฟะพะปะฝะตะฝะธะต `document_processor`.
3. **Docling-ะฟัะตะพะฑัะฐะทะพะฒะฐะฝะธะต** โ ะธะทะฒะปะตัะตะฝะธะต ััััะบัััั, ัะฐะฑะปะธั, ะธะทะพะฑัะฐะถะตะฝะธะน (ะฑะตะท OCR ะฟะพ ัะผะพะปัะฐะฝะธั, OCR ะฒะบะปััะฐะตััั ะพะฟัะธะพะฝะฐะปัะฝะพ ะธะปะธ ะฟัะธ ะพััััััะฒะธะธ ัะธััะพะฒะพะณะพ ัะปะพั ะฒ PDF).
4. **ะะพัะผะฐะปะธะทะฐัะธั Markdown** โ ะพัะธััะบะฐ ัะพัะผะฐัะธัะพะฒะฐะฝะธั, ัะพััะฐะฝะตะฝะธะต ัะตะทัะปััะฐัะฐ ะฒ ะฟะพะดะบะฐัะฐะปะพะณ ัะทัะบะฐ (`output/<ัะทัะบ>/`). ะะพ ัะผะพะปัะฐะฝะธั ะปะพะบะฐะปัะฝัะน ัะบัะธะฟั ะบะปะฐะดัั Markdown ะฒ `output/zh/`.
5. **ะะตัะฐะดะฐะฝะฝัะต** โ ะทะฐะฟะธัั ัะตัะฝะธัะตัะบะพะน ะธะฝัะพัะผะฐัะธะธ ะฒ JSON-ะพัะฒะตั (ะฒ ะปะพะบะฐะปัะฝะพะผ ัะตะถะธะผะต) ะธ ัะพัะผะธัะพะฒะฐะฝะธะต ะพัะดะตะปัะฝัั ะพััััะพะฒ ะฟัะธ ัะฐะฑะพัะต ะฟะพะปะฝะพะณะพ ะฟะฐะนะฟะปะฐะนะฝะฐ.
6. **QA Pipeline** โ ะทะฐะฟััะบ ะผะพะดัะปะตะน `quality_assurance` ะดะปั ะฟัะพะฒะตัะบะธ ัะตะปะพััะฝะพััะธ.
7. **ะะตัะตะฒะพะด (ะพะฟัะธะพะฝะฐะปัะฝะพ)** โ `translate-documents.sh` ะฒัะทัะฒะฐะตั `translator` ะดะปั ะณะตะฝะตัะฐัะธะธ EN/RU ะฒะตััะธะน ั ะฟะพะผะพััั vLLM.
8. **ะััััะฝะพััั** โ ัะตะทัะปััะฐัั ะฟัะฑะปะธะบััััั ะฒ Prometheus, ะพัะพะฑัะฐะถะฐัััั ะฒ Grafana ะธ ะดะพัััะฟะฝั ะฒ Airflow UI.

> โน๏ธ ะะพะบะฐะปัะฝัะน ััะตะฝะฐัะธะน `translate-documents.sh` ััะธัะฐะตั ะทะฐะดะฐัั **ััะฟะตัะฝะพะน** ัะพะปัะบะพ ะฟัะธ ะฟะพัะฒะปะตะฝะธะธ ะธัะพะณะพะฒะพะณะพ ัะฐะนะปะฐ ะฟะตัะตะฒะพะดะฐ ะฒ `output/<ัะทัะบ>/`. ะัะปะธ QA ะฝะฐ ััะฐะฟะต Stageโฏ3 ะฑะปะพะบะธััะตั ะฟัะฑะปะธะบะฐัะธั Markdown, ัะบัะธะฟั ะทะฐะฒะตััะธััั ั ะพัะธะฑะบะพะน ะธ ะฟัะตะดัะฟัะตะดะธั ะพะฑ ะพััััััะฒะธะธ ัะตะทัะปััะฐัะฐ.

#### ะะณัะฐะฝะธัะตะฝะธั QA ะดะปั ะฟะตัะตะฒะพะดะฐ
- ะะฐะบัะธะผะฐะปัะฝะฐั ะดะพะปั ะบะธัะฐะนัะบะธั ัะธะผะฒะพะปะพะฒ ะฒ ัะธะฝะฐะปัะฝะพะผ ะดะพะบัะผะตะฝัะต โ **20โฏ%** (`max_chinese_chars_ratio = 0.2`).
- ะะต ะผะตะฝะตะต **80โฏ%** ะบะธัะฐะนัะบะพะณะพ ัะตะบััะฐ ะธ ัะฟะตัะธะฐะปะธะทะธัะพะฒะฐะฝะฝัั ัะตัะผะธะฝะพะฒ ะดะพะปะถะฝั ะฑััั ะฟะตัะตะฒะตะดะตะฝั; ะฝะฐัััะตะฝะธะต ัะธะบัะธััะตััั ะฒ ะพััััะฐั QA ััะพะฒะฝั 4.

### ๐ ะะฐัััะพะนะบะธ Translator Service
- `TRANSLATOR_URL` โ ะฑะฐะทะพะฒัะน URL, ะบะพัะพััะน ะธัะฟะพะปัะทัะตััั Airflow ะธ ะฒัะฟะพะผะพะณะฐัะตะปัะฝัะผะธ ัะบัะธะฟัะฐะผะธ ะดะปั ะพะฑัะฐัะตะฝะธั ะบ ะผะธะบัะพัะตัะฒะธัั ะฟะตัะตะฒะพะดะฐ. ะะฝะฐัะตะฝะธะต ะฟะพ ัะผะพะปัะฐะฝะธั ะฒะฝัััะธ ะบะพะฝัะตะนะฝะตัะพะฒ โ `http://translator:8003`.
- `SERVICE_PORT` โ ะฟะพัั, ะฝะฐ ะบะพัะพัะพะผ ะทะฐะฟััะบะฐะตััั FastAPI-ะฟัะธะปะพะถะตะฝะธะต ะฟะตัะตะฒะพะดะฐ. Docker-ะพะฑัะฐะท ะธ ะธััะพะดะฝะธะบะธ ะธัะฟะพะปัะทััั ะทะฝะฐัะตะฝะธะต `8003`; ะฟัะธ ะฝะตะพะฑัะพะดะธะผะพััะธ ะฟะพัั ะผะพะถะฝะพ ะฟะตัะตะพะฟัะตะดะตะปะธัั ัะตัะตะท ะฟะตัะตะผะตะฝะฝัั ะพะบััะถะตะฝะธั ะฟะตัะตะด ะทะฐะฟััะบะพะผ ะบะพะฝัะตะนะฝะตัะฐ.

### ะะพะฝัะธะณััะฐัะธั ัะธััะตะผั
- **ะะก**: Ubuntu 24.04
- **RAM**: 2โฏTB
- **GPU**: 2ร NVIDIA A6000 (48โฏGB VRAM ะบะฐะถะดะฐั)
- **CUDA**: 12.9+
- **Docker**: 24.0+
- **Docker Compose**: 2.20+

### ะะพะฝะธัะพัะธะฝะณ ะพะฑัะฐะฑะพัะบะธ
- **Airflow UI** โ ะบะพะฝััะพะปั DAG ะธ ะทะฐะดะฐั
- **Grafana** โ ะฒะธะทัะฐะปะธะทะฐัะธั KPI ะธ QA-ะผะตััะธะบ
- **ะะพะณะธ** โ `docker compose logs -f <service>`

## ๐ ะะพะฝะธัะพัะธะฝะณ ะธ ะผะตััะธะบะธ

**Grafana** ะพััะปะตะถะธะฒะฐะตั:
- Pipeline Success Rate
- Processing Time by DAG
- Quality Assurance Scores
- vLLM Performance (latency, throughput)
- System Resources (CPU, RAM, GPU)

**Alerts** (Prometheus/Grafana):
- ะัะธะฑะบะธ ะฒ ะปัะฑะพะผ DAG
- ะะฐัะตััะฒะพ ะฝะธะถะต 95โฏ%
- ะัะตะฒััะตะฝะธะต SLA ะฟะพ ะฒัะตะผะตะฝะธ
- ะะฝะพะผะฐะปะธะธ GPU/ะผะพะดะตะปะตะน

## ๐ฆ Deployment Notes

- ะะตัะตะผะตะฝะฝะฐั ะพะบััะถะตะฝะธั **`VLLM_API_KEY`** ะพะฑัะทะฐัะตะปัะฝะฐ ะดะปั ัะตัะฒะธัะพะฒ ะฟะตัะตะฒะพะดะฐ ะธ QA. Airflow DAG `quality_assurance` ัะตะฟะตัั ะฟัะตััะฒะฐะตั ะฐะฒัะพ-ะบะพััะตะบัะธั ะฟัะธ ะพััััััะฒะธะธ ะบะปััะฐ ะธะปะธ ะฟัะธ ะพัะฒะตัะต `401 Unauthorized`, ะฟะพััะพะผั ะฟะตัะตะด ัะฐะทะฒััััะฒะฐะฝะธะตะผ ัะฑะตะดะธัะตัั, ััะพ ะฟะตัะตะผะตะฝะฝะฐั ะทะฐะดะฐะฝะฐ ะฒ `.env`, ัะตะบัะตัะฐั Kubernetes ะธะปะธ ะดััะณะพะผ ะผะตัะฐะฝะธะทะผะต ะบะพะฝัะธะณััะฐัะธะธ.
- ะะฑะฝะพะฒะปัะฝะฝัะต guardrails ััะบะพัััั ะดะธะฐะณะฝะพััะธะบั ะพัะธะฑะพะบ โ ะฟัะธ ะฝะตะฒะตัะฝะพะผ ะบะปััะต ะทะฐะดะฐัะฐ ยซAuto-Correctionยป ะฟะพะผะตัะฐะตััั ะบะฐะบ `failed`, ััะพ ะฑะปะพะบะธััะตั ะดะฐะปัะฝะตะนััั ะพัะบะตัััะฐัะธั ะดะพ ััััะฐะฝะตะฝะธั ะฟัะพะฑะปะตะผั ั ะฐะฒัะพัะธะทะฐัะธะตะน.

## โ๏ธ ะะฐะฒะธัะธะผะพััั Docling ะธ ะฟัะตะดัะฟัะตะถะดะตะฝะธะต `Docling ะฝะต ัััะฐะฝะพะฒะปะตะฝ`

ะคัะฝะบัะธะพะฝะฐะปัะฝะพััั Docling ัะตะฟะตัั ัะตะปะธะบะพะผ ัะพััะตะดะพัะพัะตะฝะฐ ะฒ ัะตัะฒะธัะต `document-processor`. Flask API ะฒััััะฟะฐะตั ัะปัะทะพะผ ะธ ะฟะตัะตััะปะฐะตั ะทะฐะณััะถะตะฝะฝัะต PDF ะฒ `document-processor` ะฟะพ HTTP. ะะพััะพะผั ัะฐะผะพ ะฟัะธะปะพะถะตะฝะธะต Flask ะฝะต ััะตะฑัะตั ะปะพะบะฐะปัะฝะพะน ัััะฐะฝะพะฒะบะธ [`docling`](https://pypi.org/project/docling-core/).

**ะงัะพ ะพะทะฝะฐัะฐัั ะฟัะตะดัะฟัะตะถะดะตะฝะธั ะฒ ะปะพะณะฐั Flask API:**

- ะกะพะพะฑัะตะฝะธะต `Docling ะฝะตะดะพัััะฟะตะฝ ัะตัะตะท document-processor ... - ะฑัะดะตั ะธัะฟะพะปัะทะพะฒะฐะฝ fallback ัะตะถะธะผ` ะฟะพัะฒะปัะตััั, ะตัะปะธ Flask ะฝะต ะผะพะถะตั ะพะฑัะฐัะธัััั ะบ ัะตัะฒะธัั `document-processor` ะฝะฐ `DOCUMENT_PROCESSOR_URL`.
- ะ ัะฐะบะพะผ ัะปััะฐะต ะฒะบะปััะฐะตััั ัะฟัะพััะฝะฝัะน fallback (PyMuPDF), ะบะพัะพััะน ะฟัะตะดะฝะฐะทะฝะฐัะตะฝ ัะพะปัะบะพ ะดะปั ะฐะฒะฐัะธะนะฝัั ััะตะฝะฐัะธะตะฒ ะธ ะฝะต ะทะฐะผะตะฝัะตั ะฟะพะปะฝะพัะตะฝะฝัั Docling-ะบะพะฝะฒะตััะฐัะธั.

**ะะฐะบ ัะฑะตะดะธัััั, ััะพ Docling ะทะฐะดะตะนััะฒะพะฒะฐะฝ:**

1. ะัะพะฒะตัััะต, ััะพ ะบะพะฝัะตะนะฝะตั/ัะปัะถะฑะฐ `document-processor` ะทะฐะฟััะตะฝะฐ ะธ ะฟัะพัะปะฐ health-check:
   ```bash
   docker compose ps document-processor
   curl http://localhost:8001/health
   ```
2. ะฃะฑะตะดะธัะตัั, ััะพ ะฒะฝัััะธ ะบะพะฝัะตะนะฝะตัะฐ `document-processor` ัััะฐะฝะพะฒะปะตะฝั ะทะฐะฒะธัะธะผะพััะธ Docling (ะพะฝะธ ัะถะต ะฟัะพะฟะธัะฐะฝั ะฒ `document_processor/requirements-docprocessor.txt`). ะัะธ ะฝะตะพะฑัะพะดะธะผะพััะธ ะฟะตัะตัะพะฑะตัะธัะต ะพะฑัะฐะท:
   ```bash
   docker compose build document-processor
   docker compose up -d document-processor
   ```
3. ะ ะปะพะณะฐั `flask-api` ะฟะพัะปะต ััะฟะตัะฝะพะณะพ ัะพะตะดะธะฝะตะฝะธั ั `document-processor` ะฟัะตะดัะฟัะตะถะดะตะฝะธั ะฟัะพะฟะฐะดัั, ะฐ ัะธััะพะฒัะต PDF ะฑัะดัั ะพะฑัะฐะฑะฐััะฒะฐัััั Docling ะฒะฝัััะธ ัะฟะตัะธะฐะปะธะทะธัะพะฒะฐะฝะฝะพะณะพ ัะตัะฒะธัะฐ.


## ๐๏ธ ะกัััะบัััะฐ ะฒััะพะดะฝัั ัะฐะนะปะพะฒ

```
output/
โโโ <ัะทัะบ> (zh - ะดะปั ะบะพะฝะฒะตััะฐัะธะธ ะฑะตะท ะฟะตัะตะฒะพะดะฐ, en/ru - ะบะพะฝะฒะตััะฐัะธั ั ะฟะตัะตะฒะพะดะพะผ)/
    โโโ <timestamp>_<ะธะผั_ัะฐะนะปะฐ>.md  # ะัะฝะพะฒะฝะพะน Markdown (ะฟะพ ัะผะพะปัะฐะฝะธั zh)
    โโโ images/                     # (ะพะฟัะธะพะฝะฐะปัะฝะพ) ะฒะปะพะถะตะฝะฝัะต ะธะทะพะฑัะฐะถะตะฝะธั
    โโโ metadata/                   # (ะพะฟัะธะพะฝะฐะปัะฝะพ) ะฒัะฟะพะผะพะณะฐัะตะปัะฝัะต JSON/ะพััััั
```
