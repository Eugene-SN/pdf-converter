[2025-10-09T14:11:59.672+0000] {taskinstance.py:1956} INFO - Dependencies all met for dep_context=non-requeueable deps ti=<TaskInstance: quality_assurance.generate_comprehensive_qa_report manual__2025-10-09T14:09:51.806441+00:00 [queued]>
[2025-10-09T14:11:59.678+0000] {taskinstance.py:1956} INFO - Dependencies all met for dep_context=requeueable deps ti=<TaskInstance: quality_assurance.generate_comprehensive_qa_report manual__2025-10-09T14:09:51.806441+00:00 [queued]>
[2025-10-09T14:11:59.678+0000] {taskinstance.py:2170} INFO - Starting attempt 1 of 2
[2025-10-09T14:11:59.685+0000] {taskinstance.py:2191} INFO - Executing <Task(PythonOperator): generate_comprehensive_qa_report> on 2025-10-09 14:09:51.806441+00:00
[2025-10-09T14:11:59.692+0000] {standard_task_runner.py:60} INFO - Started process 1007 to run task
[2025-10-09T14:11:59.694+0000] {standard_task_runner.py:87} INFO - Running: ['***', 'tasks', 'run', 'quality_assurance', 'generate_comprehensive_qa_report', 'manual__2025-10-09T14:09:51.806441+00:00', '--job-id', '1192', '--raw', '--subdir', 'DAGS_FOLDER/quality_assurance.py', '--cfg-path', '/tmp/tmp98t5g29s']
[2025-10-09T14:11:59.696+0000] {standard_task_runner.py:88} INFO - Job 1192: Subtask generate_comprehensive_qa_report
[2025-10-09T14:11:59.740+0000] {task_command.py:423} INFO - Running <TaskInstance: quality_assurance.generate_comprehensive_qa_report manual__2025-10-09T14:09:51.806441+00:00 [running]> on host 9554f3e82501
[2025-10-09T14:11:59.943+0000] {taskinstance.py:2480} INFO - Exporting env vars: AIRFLOW_CTX_DAG_OWNER='pdf-converter' AIRFLOW_CTX_DAG_ID='quality_assurance' AIRFLOW_CTX_TASK_ID='generate_comprehensive_qa_report' AIRFLOW_CTX_EXECUTION_DATE='2025-10-09T14:09:51.806441+00:00' AIRFLOW_CTX_TRY_NUMBER='1' AIRFLOW_CTX_DAG_RUN_ID='manual__2025-10-09T14:09:51.806441+00:00'
[2025-10-09T14:12:00.001+0000] {shared_utils.py:170} INFO - 📊 Метрики: {'dag_id': 'quality_assurance', 'task_id': 'generate_comprehensive_qa_report', 'processing_time_seconds': 0.05700850486755371, 'pages_processed': 0, 'file_size_mb': 0.0, 'success': True, 'timestamp': '2025-10-09T14:12:00.001233'}
[2025-10-09T14:12:00.001+0000] {quality_assurance.py:1473} INFO - 📊 Полный QA отчет создан: 95.3% - ✅ PASSED
[2025-10-09T14:12:00.001+0000] {python.py:201} INFO - Done. Returned value was: {'session_id': 'qa_full_1760018993', 'document_file': '/app/output/zh/1760018830_test_short.md', 'qa_completion_time': '2025-10-09T14:12:00.000594', 'overall_score': 95.30000000000001, 'quality_passed': True, 'enterprise_validation': True, 'level_results': {'level1_ocr_validation': {'level': 1, 'name': 'ocr_cross_validation', 'consensus_confidence': 0.9900000000000001, 'validation_score': 0.9900000000000001, 'engines_used': ['paddleocr', 'tesseract'], 'issues_found': [], 'processing_time': 0.015452384948730469, 'paddleocr_confidence': 0.9700000000000001, 'tesseract_confidence': 0.87}, 'level2_visual_comparison': {'level': 2, 'name': 'visual_comparison', 'overall_similarity': 1.0, 'ssim_score': 1.0, 'differences_count': 0, 'issues_found': [], 'processing_time': 0.06809401512145996, 'pandoc_integration': True, 'validation_score': 1.0, 'pages_compared': 0, 'diff_summary': {'status': 'skipped', 'reason': 'visual_diff_unavailable'}, 'diff_image_paths': [], 'result_pdf_path': '/opt/***/temp/1760018830_test_short/1760018830_test_short_result.pdf'}, 'level3_ast_structure': {'level': 3, 'name': 'ast_structure_comparison', 'structural_similarity': 0.9999999999999999, 'semantic_similarity': 0.9, 'validation_score': 0.95, 'issues_found': [], 'processing_time': 0.017563581466674805}, 'level4_content_validation': {'level': 4, 'name': 'enhanced_content_validation', 'overall_score': 82.5, 'quality_passed': True, 'validation_score': 0.825, 'detailed_scores': {'structure': 1.0, 'content': 0.2, 'terms': 1.0, 'markdown': 1.0, 'translation': 1.0, 'formatting': 1.0, 'consistency': 1.0, 'completeness': 0.4}, 'issues_found': ['Пустые разделы: 6', 'Высокий уровень повторов: 35.9%', 'Недостаточно основных секций: 0/4'], 'processing_time': 0.017899036407470703}, 'level5_auto_correction': {'level': 5, 'name': 'auto_correction', 'corrections_applied': 0, 'correction_confidence': 0.0, 'corrected_content': '# upload_1760018835_test_short\n\n## 命令列表\n\n| Command Name          | NetFn | CMD | Privilege | 备注                                                                 |  |\n|-----------------------|-------|-----|-----------|----------------------------------------------------------------------|---|\n| chassis status        |       |     | User      | 获取当前服务器 (Server) 状态                                           |   |\n| chassis restart_cause |       |     | User      | 获取服务器 (Server) 系统上次重启原因                                   |   |\n| chassis selftest      |       |     | User      | 获取服务器 (Server) 系统自检结果                                       |   |\n| chassis policy always-on/previous/always-off |       |     | operator | 设置服务器 (Server) 系统电源 (Power Supply) 恢复策略为自动开机 / 恢复到断电前状态 / 保持关机状态 |   |\n| chassis bootdev {device} |       |     | operator | 设置服务器 (Server) 的启动项                                         |   |\n| power status          |       |     | User      | 获取服务器 (Server) 系统电源 (Power Supply) 当前状态                   |   |\n| power on/up           |       |     | operator  | 设置服务器 (Server) 开机                                               |   |\n| power off/down        |       |     | operator  | 设置服务器 (Server) 关机                                               |   |\n| power reset           |       |     | operator  | 设置服务器 (Server) 重启                                               |   |\n| mc info               |       |     | User      | 获取服务器 (Server) 管理系统各个模块信息                               |   |\n| mc selftest           |       |     | User      | 获取服务器 (Server) 管理系统自检结果                                   |   |\n| mc reset cold         |       |     | Admin     | 设置服务器 (Server) 管理系统冷重启                                     |   |\n| sdr                  |       |     | User      | 获取服务器 (Server) 所有传感器的部分信息                                 |   |\n| sensor list           |       |     | User      | 获取服务器 (Server) 所有传感器的详细参数信息                           |   |\n| sensor get {sensor-name} |       |     | User      | 获取服务器 (Server) 指定传感器的详细信息                             |   |\n| sensor thresh {sensor-name} |       |     | Admin     | 设置服务器 (Server) 指定传感器的阈值                               |   |\n| sel                  |       |     | User      | 获取系统日志信息                                                       |   |\n| sel elist            |       |     | User      | 获取系统详细日志记录                                                   |   |\n| fru                  |       |     | User      | 获取现场可替换单元信息                                                 |   |\n| session info active   |       |     | User      | 获取服务器 (Server) 管理系统当前活跃用户的会话信息                     |   |\n| User list             |       |     | User      | 获取所有用户信息                                                       |   |\n| User set name {User id} {Username} |       |     | Admin     | 设置服务器 (Server) 管理系统新增用户名                         |   |\n| User set password {User id} {password} |       |     | Admin     | 设置服务器 (Server) 管理系统指定用户的密码                   |   |\n| User test {User id} {16 | 20} {password} |       |     | Admin     | 验证用户名密码的正确性                                     |   |\n| User disable {User id} |       |     | Admin     | 关闭指定用户的服务器 (Server) 管理系统的访问权限                       |   |\n| User enable {User id} |       |     | Admin     | 开启指定用户的服务器 (Server) 管理系统的访问权限                       |   |\n| User priv {User id} {privilege level} |       |     | Admin     | 设置指定用户的服务器 (Server) 管理系统访问权限                 |   |\n\n## 用户管理命令\n\n### 用户信息操作\n\n| Command | Description | Privilege | Example |\n| --- | --- | --- | --- |\n| `User set name {User id} {Username}` | 设置服务器管理系统新增用户名 | Admin | 设置服务器管理系统新增用户名 |\n| `User set password {User id} {password}` | 设置服务器管理系统指定用户的密码 | Admin | 设置服务器管理系统指定用户的密码 |\n| `User test {User id} {16 | 20} {password}` | 验证用户名密码的正确性 | Admin | 验证用户名密码的正确性 |\n| `User disable {User id}` | 关闭指定用户的服务器管理系统访问权限 | Admin | 关闭指定用户的服务器管理系统访问权限 |\n| `User enable {User id}` | 开启指定用户的服务器管理系统访问权限 | Admin | 开启指定用户的服务器管理系统访问权限 |\n| `User priv {User id} {privilege level}` | 设置指定用户的服务器管理系统访问权限 | Admin | 设置指定用户的服务器管理系统访问权限 |\n\n---\n\n## 系统自检结果查询\n\n### chassis selftest\n\n| Command Description | `chassis selftest` 命令用来获取服务器系统自检结果 |\n| --- | --- |\n\n| Privilege | user |\n| --- | --- |\n\n| Command Example | ```bash lenovo:~# ipmitool -H [BMC_IP] -U USERID -P PASSW0RD -I lanplus chassis selftest Self Test Results : passed ``` |\n\n---\n\n## 电源恢复策略设置\n\n### chassis policy\n\n| Command Description | `chassis policy` 命令用来设置服务器系统电源恢复策略。支持三种策略：1. always-on：当服务器电源接通后系统会自动启动；2. previous：当服务器电源接通后系统恢复电源拔出前的状态；3. always-off：当服务器电源接通后系统保持关机状态 |\n| --- | --- |\n\n| Privilege | operator |\n| --- | --- |\n\n| Command Example | ```bash lenovo:~# ipmitool -H [BMC_IP] -U USERID -P PASSW0RD -I lanplus chassis policy state <state>: list : return supported policies ``` |\n\n## chassis policy <state> (设置服务器电源恢复策略)\n\n| Command Description | `chassis policy` 命令用于设置服务器 (Server) 系统的电源恢复策略。支持以下三种策略：  \n| --- | --- |  \n| 1. **always-on** | 当服务器 (Server) 电源 (Power Supply) 接通后，系统会自动启动。  \n| 2. **previous** | 当服务器 (Server) 电源 (Power Supply) 接通后，系统恢复至电源 (Power Supply) 拔出前的状态。  \n| 3. **always-off** | 当服务器 (Server) 电源 (Power Supply) 接通后，系统保持关机状态。  \n\n| Privilege | operator |  \n| --- | --- |  \n\n| Command Example | `-H [BMC_IP] -U USERID -P PASSW0RD -I lanplus`  \n|  | `lenovo:~# ipmitool lanplus chassis policy state <state>: list : return supported policies` |  \n\n---\n\n## chassis bootdev {device} (设置服务器的一次性启动选项)\n\n| Command Description | `chassis bootdev` 命令用于设置服务器 (Server) 系统的一次性启动选项。  \n| --- | --- |  \n\n| Privilege | operator |  \n\n---\n\n## sol activate (激活 SOL 功能)\n\n| Command Description | `sol activate` 命令用于激活 Serial Over LAN (SOL) 功能。  \n| --- | --- |  \n\n| Privilege | administrator |  \n\n| Command Example | `lenovo:~# ipmitool -H [BMC_IP] -U USERID -P PASSW0RD -I lanplus sol activate usesolkeepalive [SOL Session operational. Use ~? for help]` |  \n\n---\n\n## sol deactivate (关闭 SOL 功能)\n\n| Command Description | `sol deactivate` 命令用于关闭 Serial Over LAN (SOL) 功能。  \n| --- | --- |  \n\n| Privilege | administrator |  \n\n| Command Example | `lenovo:~# ipmitool -H [BMC_IP] -U USERID -P PASSW0RD -I lanplus sol deactivate` |  \n\n---\n\n### Lenovo BMC 支持的 OEM RAW 命令\n\n下列命令是 Lenovo BMC 支持的 OEM RAW 命令。  \n| Command Description | 说明 |  \n| --- | --- |  \n| `lenovo:~# ipmitool raw 0x32 0x01` | 示例命令，具体功能需根据实际情况查阅相关文档。 |  \n| `lenovo:~# ipmitool raw 0x32 0x02` | 示例命令，具体功能需根据实际情况查阅相关文档。 |  \n\n---\n\n### 注意事项\n\n1. **权限要求**：确保执行命令的用户具有相应的权限（operator 或 administrator）。  \n2. **命令格式**：命令中的 `[BMC_IP]`、`USERID` 和 `PASSW0RD` 需替换为实际的 BMC IP 地址、用户名和密码。  \n3. **命令验证**：在生产环境中执行命令前，请务必确认命令的正确性和安全性。  \n\n---  \n\n此文档内容基于 Lenovo 企业级服务器硬件的管理命令，适用于联想问天 (Lenovo WenTian) 和天擎 (ThinkSystem) 系列服务器。如需更多详细信息，请参考 Lenovo 官方文档或联系技术支持。\n\n## SOL 激活（sol activate）\n\n| **描述** | **sol activate 命令用于激活 SOL** |\n| --- | --- |\n| **权限** | **administrator** |\n| **命令示例** | `lenovo:~# ipmitool -H [BMC_IP] -U USERID -P PASSW0RD -I lanplus sol activate usesolkeepalive [SOL Session operational. Use ~? for help]` |\n\n## SOL 关闭（sol deactivate）\n\n| **命令描述** | **sol deactivate** |\n| --- | --- |\n| **权限** | **administrator** |\n| **命令示例** | `lenovo:~# ipmitool -H [BMC_IP] -U USERID -P PASSW0RD -I lanplus sol deactivate` |\n\n## Lenovo BMC 支持的 OEM RAW 命令\n\n### 获取 SNMP Trap 信息（Get SNMP Trap Info）\n\n#### 命令格式\n- **netfn**: `0x30`\n- **cmd**: `0x02`\n\n#### 请求数据格式\n\n| **字段** | **字节** | **数据字段** |\n| --- | --- | --- |\n| **Request Data** | **1** | user ID（值范围：01h 到 05h） |\n| **Request Data** | **2** | 参数定义： |\n|  |  | - 01h - enable |\n|  |  | - 02h - severity |\n|  |  | - 03h - version |\n|  |  | - 04h - mode |\n|  |  | - 05h - community |\n|  |  | - 06h - user |\n|  |  | - 07h - user encrypt |\n|  |  | - 08h - password |\n|  |  | - 09h - pass encrypt |\n|  |  | - 0Ah - destination IP |\n|  |  | - 0Bh - port |\n|  |  | - 0Ch - lan channel |\n|  |  | - 0Dh - enter ID |\n\n#### 响应数据格式\n\n| **参数** | **字节** | **数据字段** |\n| --- | --- | --- |\n| **Response Data for parameter 01h** | **1** | Completion code |\n|  | **2** | 00h - disable, 01h - enable |\n| **Response Data for parameter 02h** | **1** | Completion code |\n|  | **2** | severity: 01h - critical, 02h - critical and warning, 03h - all |\n| **Response Data for parameter 03h** | **1** | Completion code |\n|  | **2** | version: 01h - v1, 02h - v2c, 03h - v3 |\n| **Response Data for parameter 04h** | **1** | Completion code |\n|  | **2** | mode |\n| **Response Data for parameter 05h** | **1** | Completion code |\n|  | **2:17** | community |\n| **Response Data for parameter 06h** | **1** | Completion code |\n|  | **2:17** | user |\n| **Response Data for parameter 07h** | **1** | Completion code |\n|  | **2** | user encrypt: 00h - user encrypt, 01h - user non-encrypt |\n| **Response Data for parameter 08h** | **1** | Completion code |\n|  | **2:17** | password |\n| **Response Data for parameter 09h** | **1** | Completion code |\n|  | **2** | password encrypt: 00h - password encrypt, 01h - password non-encrypt |\n| **Response Data for parameter 0Ah** | **1** | Completion code |\n|  | **2:33** | destination IP |\n| **Response Data for parameter 0Bh** | **1** | Completion code |\n|  | **2:3** | port |\n| **Response Data for parameter 0Ch** | **1** | Completion code |\n|  | **2** | lan channel |\n| **Response Data for parameter 0Dh** | **1** | Completion code |\n|  | **2:33** | enter ID |\n\n#### 命令示例\n```bash\n# ipmitool -H `10.109.107.160` -U USERID -P PASSW0RD\n```\n\n        | **Byte** | **Data Field**                     |\n|------------------------|----------|-------------------------------------|\n| **for parameter 0Ah** | 2:33     | destination IP                     |\n| **Response Data**     | 1        | Completion code                    |\n| **for parameter 0Bh** | 2:3      | port                               |\n| **for parameter 0Ch** | 2        | lan channel                        |\n| **---**               | **---**   | **---**                             |\n| **Response Data**     | 1        | Completion code                    |\n| **for parameter 0Dh** | 2:33     | enter ID                           |\n\n---\n\n## Set SNMP Trap Info (设置 SNMP trap 信息)\n\n### SNMP Trap Info Command\n| **Command**            | **NetFN** | **Command** |\n|------------------------|-----------|-------------|\n| SET SNMPTRAPINFO       | `0x30`    | `0x03`      |\n\n### Request Data Structure\n\n| **Parameter**         | **Byte** | **Data Field**                                                                 |\n|------------------------|----------|-------------------------------------------------------------------------------|\n| **Request Data**      | 1        | user ID (value ranges from `01h` to `05h`)                                   |\n| **Request Data**      | 2        | parameter values: <br> `01h` - enable <br> `02h` - severity <br> `03h` - version <br> `04h` - mode <br> `05h` - community <br> `06h` - user <br> `07h` - user encrypt <br> `08h` - password <br> `09h` - pass encrypt <br> `0Ah` - destination IP <br> `0Bh` - port <br> `0Ch` - lan channel <br> `0Dh` - enter ID |\n| **Request Data**      | 3        | parameter values: <br> `01h` - enable: <br> `00h` - disable <br> `01h` - enable <br> `02h` - severity: <br> `01h` - critical <br> `02h` - critical and warning <br> `03h` - all <br> `03h` - version: |\n\n---\n\n## Notes\n- Ensure that all parameters are correctly configured according to the specified byte values.\n- The completion code in the response data indicates the success or failure of the command execution.\n- SNMP trap information is crucial for monitoring and alerting in enterprise server environments.\n```\n```\n', 'validation_score': 1.0, 'issues_found': ['vLLM correction confidence too low: 0.000'], 'processing_time': 122.14568209648132}}, 'level_scores': {'level_1': 0.9900000000000001, 'level_2': 1.0, 'level_3': 0.95, 'level_4': 0.825, 'level_5': 1.0}, 'all_issues': ['Пустые разделы: 6', 'Высокий уровень повторов: 35.9%', 'Недостаточно основных секций: 0/4', 'vLLM correction confidence too low: 0.000'], 'corrections_applied': 0, 'corrected_content': '# upload_1760018835_test_short\n\n## 命令列表\n\n| Command Name          | NetFn | CMD | Privilege | 备注                                                                 |  |\n|-----------------------|-------|-----|-----------|----------------------------------------------------------------------|---|\n| chassis status        |       |     | User      | 获取当前服务器 (Server) 状态                                           |   |\n| chassis restart_cause |       |     | User      | 获取服务器 (Server) 系统上次重启原因                                   |   |\n| chassis selftest      |       |     | User      | 获取服务器 (Server) 系统自检结果                                       |   |\n| chassis policy always-on/previous/always-off |       |     | operator | 设置服务器 (Server) 系统电源 (Power Supply) 恢复策略为自动开机 / 恢复到断电前状态 / 保持关机状态 |   |\n| chassis bootdev {device} |       |     | operator | 设置服务器 (Server) 的启动项                                         |   |\n| power status          |       |     | User      | 获取服务器 (Server) 系统电源 (Power Supply) 当前状态                   |   |\n| power on/up           |       |     | operator  | 设置服务器 (Server) 开机                                               |   |\n| power off/down        |       |     | operator  | 设置服务器 (Server) 关机                                               |   |\n| power reset           |       |     | operator  | 设置服务器 (Server) 重启                                               |   |\n| mc info               |       |     | User      | 获取服务器 (Server) 管理系统各个模块信息                               |   |\n| mc selftest           |       |     | User      | 获取服务器 (Server) 管理系统自检结果                                   |   |\n| mc reset cold         |       |     | Admin     | 设置服务器 (Server) 管理系统冷重启                                     |   |\n| sdr                  |       |     | User      | 获取服务器 (Server) 所有传感器的部分信息                                 |   |\n| sensor list           |       |     | User      | 获取服务器 (Server) 所有传感器的详细参数信息                           |   |\n| sensor get {sensor-name} |       |     | User      | 获取服务器 (Server) 指定传感器的详细信息                             |   |\n| sensor thresh {sensor-name} |       |     | Admin     | 设置服务器 (Server) 指定传感器的阈值                               |   |\n| sel                  |       |     | User      | 获取系统日志信息                                                       |   |\n| sel elist            |       |     | User      | 获取系统详细日志记录                                                   |   |\n| fru                  |       |     | User      | 获取现场可替换单元信息                                                 |   |\n| session info active   |       |     | User      | 获取服务器 (Server) 管理系统当前活跃用户的会话信息                     |   |\n| User list             |       |     | User      | 获取所有用户信息                                                       |   |\n| User set name {User id} {Username} |       |     | Admin     | 设置服务器 (Server) 管理系统新增用户名                         |   |\n| User set password {User id} {password} |       |     | Admin     | 设置服务器 (Server) 管理系统指定用户的密码                   |   |\n| User test {User id} {16 | 20} {password} |       |     | Admin     | 验证用户名密码的正确性                                     |   |\n| User disable {User id} |       |     | Admin     | 关闭指定用户的服务器 (Server) 管理系统的访问权限                       |   |\n| User enable {User id} |       |     | Admin     | 开启指定用户的服务器 (Server) 管理系统的访问权限                       |   |\n| User priv {User id} {privilege level} |       |     | Admin     | 设置指定用户的服务器 (Server) 管理系统访问权限                 |   |\n\n## 用户管理命令\n\n### 用户信息操作\n\n| Command | Description | Privilege | Example |\n| --- | --- | --- | --- |\n| `User set name {User id} {Username}` | 设置服务器管理系统新增用户名 | Admin | 设置服务器管理系统新增用户名 |\n| `User set password {User id} {password}` | 设置服务器管理系统指定用户的密码 | Admin | 设置服务器管理系统指定用户的密码 |\n| `User test {User id} {16 | 20} {password}` | 验证用户名密码的正确性 | Admin | 验证用户名密码的正确性 |\n| `User disable {User id}` | 关闭指定用户的服务器管理系统访问权限 | Admin | 关闭指定用户的服务器管理系统访问权限 |\n| `User enable {User id}` | 开启指定用户的服务器管理系统访问权限 | Admin | 开启指定用户的服务器管理系统访问权限 |\n| `User priv {User id} {privilege level}` | 设置指定用户的服务器管理系统访问权限 | Admin | 设置指定用户的服务器管理系统访问权限 |\n\n---\n\n## 系统自检结果查询\n\n### chassis selftest\n\n| Command Description | `chassis selftest` 命令用来获取服务器系统自检结果 |\n| --- | --- |\n\n| Privilege | user |\n| --- | --- |\n\n| Command Example | ```bash lenovo:~# ipmitool -H [BMC_IP] -U USERID -P PASSW0RD -I lanplus chassis selftest Self Test Results : passed ``` |\n\n---\n\n## 电源恢复策略设置\n\n### chassis policy\n\n| Command Description | `chassis policy` 命令用来设置服务器系统电源恢复策略。支持三种策略：1. always-on：当服务器电源接通后系统会自动启动；2. previous：当服务器电源接通后系统恢复电源拔出前的状态；3. always-off：当服务器电源接通后系统保持关机状态 |\n| --- | --- |\n\n| Privilege | operator |\n| --- | --- |\n\n| Command Example | ```bash lenovo:~# ipmitool -H [BMC_IP] -U USERID -P PASSW0RD -I lanplus chassis policy state <state>: list : return supported policies ``` |\n\n## chassis policy <state> (设置服务器电源恢复策略)\n\n| Command Description | `chassis policy` 命令用于设置服务器 (Server) 系统的电源恢复策略。支持以下三种策略：  \n| --- | --- |  \n| 1. **always-on** | 当服务器 (Server) 电源 (Power Supply) 接通后，系统会自动启动。  \n| 2. **previous** | 当服务器 (Server) 电源 (Power Supply) 接通后，系统恢复至电源 (Power Supply) 拔出前的状态。  \n| 3. **always-off** | 当服务器 (Server) 电源 (Power Supply) 接通后，系统保持关机状态。  \n\n| Privilege | operator |  \n| --- | --- |  \n\n| Command Example | `-H [BMC_IP] -U USERID -P PASSW0RD -I lanplus`  \n|  | `lenovo:~# ipmitool lanplus chassis policy state <state>: list : return supported policies` |  \n\n---\n\n## chassis bootdev {device} (设置服务器的一次性启动选项)\n\n| Command Description | `chassis bootdev` 命令用于设置服务器 (Server) 系统的一次性启动选项。  \n| --- | --- |  \n\n| Privilege | operator |  \n\n---\n\n## sol activate (激活 SOL 功能)\n\n| Command Description | `sol activate` 命令用于激活 Serial Over LAN (SOL) 功能。  \n| --- | --- |  \n\n| Privilege | administrator |  \n\n| Command Example | `lenovo:~# ipmitool -H [BMC_IP] -U USERID -P PASSW0RD -I lanplus sol activate usesolkeepalive [SOL Session operational. Use ~? for help]` |  \n\n---\n\n## sol deactivate (关闭 SOL 功能)\n\n| Command Description | `sol deactivate` 命令用于关闭 Serial Over LAN (SOL) 功能。  \n| --- | --- |  \n\n| Privilege | administrator |  \n\n| Command Example | `lenovo:~# ipmitool -H [BMC_IP] -U USERID -P PASSW0RD -I lanplus sol deactivate` |  \n\n---\n\n### Lenovo BMC 支持的 OEM RAW 命令\n\n下列命令是 Lenovo BMC 支持的 OEM RAW 命令。  \n| Command Description | 说明 |  \n| --- | --- |  \n| `lenovo:~# ipmitool raw 0x32 0x01` | 示例命令，具体功能需根据实际情况查阅相关文档。 |  \n| `lenovo:~# ipmitool raw 0x32 0x02` | 示例命令，具体功能需根据实际情况查阅相关文档。 |  \n\n---\n\n### 注意事项\n\n1. **权限要求**：确保执行命令的用户具有相应的权限（operator 或 administrator）。  \n2. **命令格式**：命令中的 `[BMC_IP]`、`USERID` 和 `PASSW0RD` 需替换为实际的 BMC IP 地址、用户名和密码。  \n3. **命令验证**：在生产环境中执行命令前，请务必确认命令的正确性和安全性。  \n\n---  \n\n此文档内容基于 Lenovo 企业级服务器硬件的管理命令，适用于联想问天 (Lenovo WenTian) 和天擎 (ThinkSystem) 系列服务器。如需更多详细信息，请参考 Lenovo 官方文档或联系技术支持。\n\n## SOL 激活（sol activate）\n\n| **描述** | **sol activate 命令用于激活 SOL** |\n| --- | --- |\n| **权限** | **administrator** |\n| **命令示例** | `lenovo:~# ipmitool -H [BMC_IP] -U USERID -P PASSW0RD -I lanplus sol activate usesolkeepalive [SOL Session operational. Use ~? for help]` |\n\n## SOL 关闭（sol deactivate）\n\n| **命令描述** | **sol deactivate** |\n| --- | --- |\n| **权限** | **administrator** |\n| **命令示例** | `lenovo:~# ipmitool -H [BMC_IP] -U USERID -P PASSW0RD -I lanplus sol deactivate` |\n\n## Lenovo BMC 支持的 OEM RAW 命令\n\n### 获取 SNMP Trap 信息（Get SNMP Trap Info）\n\n#### 命令格式\n- **netfn**: `0x30`\n- **cmd**: `0x02`\n\n#### 请求数据格式\n\n| **字段** | **字节** | **数据字段** |\n| --- | --- | --- |\n| **Request Data** | **1** | user ID（值范围：01h 到 05h） |\n| **Request Data** | **2** | 参数定义： |\n|  |  | - 01h - enable |\n|  |  | - 02h - severity |\n|  |  | - 03h - version |\n|  |  | - 04h - mode |\n|  |  | - 05h - community |\n|  |  | - 06h - user |\n|  |  | - 07h - user encrypt |\n|  |  | - 08h - password |\n|  |  | - 09h - pass encrypt |\n|  |  | - 0Ah - destination IP |\n|  |  | - 0Bh - port |\n|  |  | - 0Ch - lan channel |\n|  |  | - 0Dh - enter ID |\n\n#### 响应数据格式\n\n| **参数** | **字节** | **数据字段** |\n| --- | --- | --- |\n| **Response Data for parameter 01h** | **1** | Completion code |\n|  | **2** | 00h - disable, 01h - enable |\n| **Response Data for parameter 02h** | **1** | Completion code |\n|  | **2** | severity: 01h - critical, 02h - critical and warning, 03h - all |\n| **Response Data for parameter 03h** | **1** | Completion code |\n|  | **2** | version: 01h - v1, 02h - v2c, 03h - v3 |\n| **Response Data for parameter 04h** | **1** | Completion code |\n|  | **2** | mode |\n| **Response Data for parameter 05h** | **1** | Completion code |\n|  | **2:17** | community |\n| **Response Data for parameter 06h** | **1** | Completion code |\n|  | **2:17** | user |\n| **Response Data for parameter 07h** | **1** | Completion code |\n|  | **2** | user encrypt: 00h - user encrypt, 01h - user non-encrypt |\n| **Response Data for parameter 08h** | **1** | Completion code |\n|  | **2:17** | password |\n| **Response Data for parameter 09h** | **1** | Completion code |\n|  | **2** | password encrypt: 00h - password encrypt, 01h - password non-encrypt |\n| **Response Data for parameter 0Ah** | **1** | Completion code |\n|  | **2:33** | destination IP |\n| **Response Data for parameter 0Bh** | **1** | Completion code |\n|  | **2:3** | port |\n| **Response Data for parameter 0Ch** | **1** | Completion code |\n|  | **2** | lan channel |\n| **Response Data for parameter 0Dh** | **1** | Completion code |\n|  | **2:33** | enter ID |\n\n#### 命令示例\n```bash\n# ipmitool -H `10.109.107.160` -U USERID -P PASSW0RD\n```\n\n        | **Byte** | **Data Field**                     |\n|------------------------|----------|-------------------------------------|\n| **for parameter 0Ah** | 2:33     | destination IP                     |\n| **Response Data**     | 1        | Completion code                    |\n| **for parameter 0Bh** | 2:3      | port                               |\n| **for parameter 0Ch** | 2        | lan channel                        |\n| **---**               | **---**   | **---**                             |\n| **Response Data**     | 1        | Completion code                    |\n| **for parameter 0Dh** | 2:33     | enter ID                           |\n\n---\n\n## Set SNMP Trap Info (设置 SNMP trap 信息)\n\n### SNMP Trap Info Command\n| **Command**            | **NetFN** | **Command** |\n|------------------------|-----------|-------------|\n| SET SNMPTRAPINFO       | `0x30`    | `0x03`      |\n\n### Request Data Structure\n\n| **Parameter**         | **Byte** | **Data Field**                                                                 |\n|------------------------|----------|-------------------------------------------------------------------------------|\n| **Request Data**      | 1        | user ID (value ranges from `01h` to `05h`)                                   |\n| **Request Data**      | 2        | parameter values: <br> `01h` - enable <br> `02h` - severity <br> `03h` - version <br> `04h` - mode <br> `05h` - community <br> `06h` - user <br> `07h` - user encrypt <br> `08h` - password <br> `09h` - pass encrypt <br> `0Ah` - destination IP <br> `0Bh` - port <br> `0Ch` - lan channel <br> `0Dh` - enter ID |\n| **Request Data**      | 3        | parameter values: <br> `01h` - enable: <br> `00h` - disable <br> `01h` - enable <br> `02h` - severity: <br> `01h` - critical <br> `02h` - critical and warning <br> `03h` - all <br> `03h` - version: |\n\n---\n\n## Notes\n- Ensure that all parameters are correctly configured according to the specified byte values.\n- The completion code in the response data indicates the success or failure of the command execution.\n- SNMP trap information is crucial for monitoring and alerting in enterprise server environments.\n```\n```\n', 'qa_rules_used': {'min_content_length': 100, 'min_headings': 1, 'max_chinese_chars_ratio': 0.3, 'require_title': True, 'check_table_structure': True, 'validate_markdown_syntax': True, 'technical_terms_check': True, 'preserve_brand_names': True, 'min_quality_score': 80.0, 'excellent_quality_score': 95.0, 'OCR_CONFIDENCE_THRESHOLD': 0.8, 'VISUAL_SIMILARITY_THRESHOLD': 0.95, 'AST_SIMILARITY_THRESHOLD': 0.9, 'SEMANTIC_SIMILARITY_THRESHOLD': 0.85, 'OVERALL_QA_THRESHOLD': 0.85, 'MAX_CORRECTIONS_PER_DOCUMENT': 10, 'AUTO_CORRECTION_CONFIDENCE': 0.7}, 'level_configs_used': {'level1_ocr': {'consensus_threshold': 0.85, 'similarity_threshold': 0.8, 'engines': ['paddleocr', 'tesseract']}, 'level2_visual': {'ssim_threshold': 0.95, 'difference_tolerance': 0.1, 'page_comparison_mode': 'structural', 'pandoc_integration': True}, 'level3_ast': {'structural_similarity_threshold': 0.9, 'semantic_similarity_threshold': 0.85, 'model_name': 'sentence-transformers/all-MiniLM-L6-v2'}, 'level4_content': {'min_technical_terms': 5, 'min_code_blocks': 1, 'formatting_score_threshold': 0.8}, 'level5_correction': {'vllm_endpoint': 'http://vllm-server:8000/v1/chat/completions', 'correction_model': 'Qwen/Qwen2.5-VL-32B-Instruct', 'max_retries': 3, 'enable_auto_correction': True}}, 'report_file': '/opt/***/temp/qa_comprehensive_report_qa_full_1760018993.json'}
[2025-10-09T14:12:00.025+0000] {taskinstance.py:1138} INFO - Marking task as SUCCESS. dag_id=quality_assurance, task_id=generate_comprehensive_qa_report, execution_date=20251009T140951, start_date=20251009T141159, end_date=20251009T141200
[2025-10-09T14:12:00.066+0000] {local_task_job_runner.py:234} INFO - Task exited with return code 0
[2025-10-09T14:12:00.089+0000] {taskinstance.py:3280} INFO - 1 downstream tasks scheduled from follow-on schedule check
